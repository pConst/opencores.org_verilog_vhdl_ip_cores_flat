<head>
<link rel="stylesheet" href="../../style.css" type="text/css">
</head>
<a href="javascript:history.go(-1)" onMouseOver="self.status=document.referrer;return true">Go Back</a>
<p align='right'><a href='pcie_sg_dma.tar.gz'>Source code</a></p>
<body>
<div class="main">
 <div class="mid" id="dm">
  <div class="content" id="dmc">
   <h2>
    Details
   </h2>
   <p>
    Name: pcie_sg_dma
    <br/>
    Created: Aug 24, 2011
    <br/>
    Updated: Mar 26, 2012
    <br/>
    SVN Updated: Mar 26, 2012
    
    
    
    
    
    
   </p>
   <h2>
    Other project properties
   </h2>
   <p>
    Category:
    
     System controller
    
    <br/>
    Language:
    
     VHDL
    
    <br/>
    Development status:
    
     Stable
    
    <br/>
    Additional info:
    
     Design done
    
    ,
    
     FPGA proven
    
    <br/>
    WishBone Compliant: No
    <br/>
    License: LGPL
   </p>
   <div id="d_Overview">
    <h2>
     
     
     Overview
    </h2>
    <p id="p_Overview">
     This package involves a PCIe Scatter-Gather DMA engine for Virtex5 and Virtex6.
     <br/>
     The design implements MAC, Physical (Xilinx Hard and Soft IP Cores) and Transaction Layer (Custom Core) of PCIe.
     <br/>
     It holds 3 BAR&#8217;s, BAR[0], BAR[1] and BAR[2], as its memory space.  Registers are accessed via BAR[0], including the system registers, DMA channel registers and some other control and status registers.  Block RAM are assigned to BAR[1]. BAR[2] contains the FIFO data ports, both write and read. FIFO control and status registers reside in BAR[0]. All 3 applied BARs are accessible with PIO operation (PIO to the FIFO can only access 32 bits of the 64-bit bus).  DMA can only target on BAR[1] and BAR[2], 64-bit full bus.
     <br/>
     The design was split into two projects: one for Virtex5 (in "Trunk" folder) and the other for Virtex6 (in "branches" folder).
     <br/>
     It was fully tested on:
     <br/>
     - AVNET Virtex5 PCIe Development Board
     <br/>
     - Xilinx Virtex6 ML605 Development Board
     <br/>
     Simulation is provided in Verilog HDL for both platforms.
     <br/>
     The design is composed by some Xilinx IP Cores. Both the VHDL code and the CoreGen .xco file are provided. To change or upgrade them, a valid license for the cores from Xilinx Inc. should be available. The PCIe core is the 1.6 version in ISE12.3 and 1.7 versione in ISE 13.3. The old 1.3 version is also provided.
     <br/>
     The DMA throughput depends on OS, machine, implementation and packet size:
     <br/>
     On a Dell Precision T5500 with Linux Debian 2.6.32 64bit we measured:
     <br/>
     Virtex5 board:
     <br/>
     - PCIe gen1.0 x4: write: up to 700 MB/s - read: up to 380 MB/s
     <br/>
     Virtex6 board:
     <br/>
     - PCIe gen2.0 x1: write: up to 426 MB/s - read: up to 417 MB/s
     <br/>
     - PCIe gen1.0 x4: write: up to 828 MB/s - read: up to 524 MB/s
     <br/>
     Another Virtex5 board DMA performance test under Linux achieves
     <br/>
     - PCIe Gen1 x4: write 790 MB/s; read 543 MB/s (FIFO) or 507 MB/s (BRAM).
     <br/>
     Linux driver are avaible at:
     
      http://li5.ziti.uni-heidelberg.de/mprace/
     
     (THX to Dr. Guillermo Marcus)
     <br/>
    </p>
   </div>
  </div>
  <div style="clear:both;margin-left:200px;">
  </div>
 </div>
</div>
</body>
<p id='foot'>Database updated on 12 June 2015</p>
