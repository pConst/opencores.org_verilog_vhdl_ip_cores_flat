<head>
<link rel="stylesheet" href="../../style.css" type="text/css">
</head>
<a href="javascript:history.go(-1)" onMouseOver="self.status=document.referrer;return true">Go Back</a>
<p align='right'><a href='nextz80.tar.gz'>Source code</a></p>
<body>
<div class="main">
 <div class="mid" id="dm">
  <div class="content" id="dmc">
   <h2>
    Details
   </h2>
   <p>
    Name: nextz80
    <br/>
    Created: Mar 18, 2011
    <br/>
    Updated: Jul  3, 2014
    <br/>
    SVN Updated: Feb  6, 2014
    
    
    
    
    
    
   </p>
   <h2>
    Other project properties
   </h2>
   <p>
    Category:
    
     Processor
    
    <br/>
    Language:
    
     Verilog
    
    <br/>
    Development status:
    
     Stable
    
    <br/>
    Additional info:
    
     Design done
    
    ,
    
     FPGA proven
    
    ,
    
     Specification done
    
    <br/>
    WishBone Compliant: No
    <br/>
    License: LGPL
   </p>
   <div id="d_Description">
    <h2>
     
     
     Description
    </h2>
    <p id="p_Description">
     - Z80 compatible processor.
     <br/>
     - All documented / un-documented intstructions are implemented.
     <br/>
     - All documented / un-documented flags are implemented.
     <br/>
     - All (doc / un-doc) flags are changed accordingly by all (doc / un-doc)instructions. The block instructions (LDx, CPx, INx, OUTx) have only the documented effects on flags. The Bit n,(IX/IY+d) and BIT n,(HL) un-documented flags XF and YF are implemented like the BIT n,r XF and YF, not actually like on the real Z80 CPU.
     <br/>
     - All interrupt modes implemented: NMI, IM0, IM1, IM2.
     <br/>
     - R register available.
     <br/>
     - Fast conditional jump/call/ret takes only 1 T state if not executed.
     <br/>
     - Fast block instructions: LDxR - 3 T states/byte, INxR/OTxR - 2 T states/byte, CPxR - 4 T states / byte
     <br/>
     - Each CPU machine cycle takes (mainly) one clock T state. This makes this processor over 4 times faster than a Z80 at the same clock frequency (some instructions are up to 10 times faster).
     <br/>
     - Works at up to 40MHZ on Spartan XC3S700AN speed grade -4) - performances similar or better than a real Z80 running at 160Mhz.
     <br/>
     - Small size (~12%, ~700 slices - on Spartan XC3S700AN).
     <br/>
     - Tested with ZEXDOC (fully compliant) and with ZEXALL (all OK except CPx(R), LDx(R), BIT n, (IX/IY+d), BIT n, (HL) - fail because of the un-documented XF and YF flags).
    </p>
   </div>
   <div id="d_Testbench">
    <h2>
     
     
     Testbench
    </h2>
    <p id="p_Testbench">
     The test bench is a micro computer based on NextZ80 processor (tested on Xilinx Spartan 3AN).
     <br/>
     Main features:
     <br/>
     - NextZ80 CPU running at 40 MHZ
     <br/>
     - the CPU receives maskable interrupt at the end of each scan line. The interrupt vector is 0x00, allowing all IM modes (IM0 = NOP, IM1 = RST38, IM2 = jump at mem[I:0]). It can be used for border effects or for ink - paper - video memory effects.
     <br/>
     - 32 KB static RAM
     <br/>
     - VGA (640*480) screen, with 128 lines upper border, 80x24 characters (8x8 pixels each), and 160 lines lower border.
     <br/>
     - screen buffer (1920 bytes) at address 0x7800
     <br/>
     - character map (2048 bytes) at address 0x7000
     <br/>
     - output port 1 - border color (R3G3B2)
     <br/>
     - output port 2 - ink color (R3G3B2)
     <br/>
     - output port 4 - paper color (R3G3B2)
     <br/>
     - output port 8 - {bit0 = PS/2 clk, bit1 = PS/2 data, bit2 = RS232 TxD}
     <br/>
     - input port 0 - scan line lower 8 bits
     <br/>
     - input port 1 - { bit1:0 = scan line upper 2 bits, bit2 = PS/2 clk, bit3 = PS/2 data, bit4 = RS232 RxD}
     <br/>
     - 1 DCM (supplied with 50 MHZ), providing the 25MHZ VGA clock and 120MHZ system clock.
     <br/>
     - 1 reset button
     <br/>
     - 1 HALT LED
     <br/>
     - RS232 interface
     <br/>
     - PS/2 keyboard interface
     <br/>
     The CPU is fed with 120Mhz, but 2 from 3 states is in WAIT. This way, the CPU runs at 40Mhz, allowing one clock state for the video generator to read the memory (no contention between CPU and VGA).
     <br/>
     The system clock is flexible, it can be adjusted from 120Mhz, by re-programming the DCM
     <br/>
     The boot loader waits for RS232 (115200 bps) to receive a binary file. It places it at address 100h and then launches it. The binary file can be a .COM CP/M file, which uses at most BDOS 2 and 9 functions (print char and string) - this is the case for ZEXDOC.COM and ZEXALL.COM, which may be directly uploaded.
     <br/>
     A RS232 communication application is provided (SerialComm).
    </p>
   </div>
   <div id="d_Screenshots">
    <h2>
     
     
     Screenshots
    </h2>
    <p id="p_Screenshots">
     Benchmark results:
     <br/>
     The ZEXALL/ZEXDOC Z80 instruction exerciser takes 5min:16sec to finalize.
     <br/>
     <img src="usercontent,img,1301998915" alt="Img1"/>
     <img src="usercontent,img,1301998939" alt="img2"/>
    </p>
   </div>
  </div>
  <div style="clear:both;margin-left:200px;">
  </div>
 </div>
</div>
</body>
<p id='foot'>Database updated on 12 June 2015</p>
