<head>
<link rel="stylesheet" href="../../style.css" type="text/css">
</head>
<a href="javascript:history.go(-1)" onMouseOver="self.status=document.referrer;return true">Go Back</a>
<p align='right'><a href='atlas_core.tar.gz'>Source code</a></p>
<body>
<div class="main">
 <div class="mid" id="dm">
  <div class="content" id="dmc">
   <h2>
    Details
   </h2>
   <p>
    Name: atlas_core
    <br/>
    Created: Mar 13, 2013
    <br/>
    Updated: Dec 20, 2014
    <br/>
    SVN Updated: Dec 18, 2014
    
    
    
    
    
    
   </p>
   <h2>
    Other project properties
   </h2>
   <p>
    Category:
    
     Processor
    
    <br/>
    Language:
    
     VHDL
    
    <br/>
    Development status:
    
     Beta
    
    <br/>
    Additional info:
    
     FPGA proven
    
    ,
    
     Specification done
    
    <br/>
    WishBone Compliant: Yes
    <br/>
    License: GPL
   </p>
   <div id="d_Description">
    <h2>
     
     
     Description
    </h2>
    <p id="p_Description">
     <u>
      Welcome to the
      <b>
       Atlas Processor Core
      </b>
      project!
     </u>
     <br/>
     <table border="0" cellpadding="5">
      <tr>
       <td>
        <br/>
        The Atlas 2k Processor is intended to be a small 16-bit RISC general purpose processor for all kind of applications, that require minimal hardware resources while providing a maximum functionality and processing power. The instruction set was inspired by famous architectures like the ARM and AVR ISAs and many of you, who worked with these architectures, will see the resemblance. However, the CPU features a lot of additional nice features and functionalites, which - at least from my point of view - make a cool processor. ;)
        <br/>
        The processor supports a flexible memory layout (with paging) and features several common communication interfaces (like SPI, UART and a Wishbone bus adapter) and peripheral devices like timer, interrupt controller and LFSR.
        <br/>
        An integrated bootloader (2kB ROM) allows to select between several boot options (configuration via 2 external pins):
        <ul>
         <li>
          Boot from UART (send image stream via serial console)
          <br/>
         </li>
         <li>
          Boot from / program external SPI EEPROM (Microchip 25LC512)
          <br/>
         </li>
         <li>
          Boot from internal memory (last image in RAM)
          <br/>
         </li>
         <li>
          Boot from Wishbone network device (only via bootloader console)
          <br/>
         </li>
        </ul>
        The Basic Setup (left image) provides a basic implementation of the processor together with an internal memory. The layout of the memory system can be individually configured via two VHDL constants to adapted to the needs of the application. This setup ist the perfect starting point for your design - just synthesize it, download it to your FPGA and begin exploring the Atlas 2k processor! :D
       </td>
       <td align="center">
        <img src="//opencores.org/websvn,filedetails?repname=atlas_core&amp;path=%2Fatlas_core%2Fweb_uploads%2Fatlas_2k_base_block.png" alt="Atlas 2k Overview" width="520"/>
       </td>
      </tr>
     </table>
     <br/>
     <b>
      For more information about this project, take a look at the processor documentary:
     </b>
     
      <b>
       Atlas 2k Processor Documentary
      </b>
     
     <br/>
     <br/>
    </p>
   </div>
   <div id="d_Processor Features">
    <h2>
     
     
     Processor Features
    </h2>
    <p id="p_Processor Features">
     <ul>
      <li>
       True 16-bit RISC open source soft-core processor, 16-bit processing data, 16-bit memory addressing
       <br/>
      </li>
      <li>
       Small outline
       <br/>
      </li>
      <li>
       Completely written in behavioral, platform-independent VHDL
       <br/>
      </li>
      <li>
       Pipelined instruction execution in 5 stages with full forwarding and hazard detection
       <br/>
      </li>
      <li>
       Single cycle execution of all instructions (except for branches and multi-cycle (memory) operations)
       <br/>
      </li>
      <li>
       Powerful memory access and indexing instructions
       <br/>
      </li>
      <li>
       Two different operating modes with unique register sets (8x 16-bit registers each) and privileges
       <br/>
      </li>
      <li>
       Full hardware support for emulating privileged-mode programs in unprivileged-mode
       <br/>
      </li>
      <li>
       Two software interrupts/exceptions (system call, command error (instruction access violation))
       <br/>
      </li>
      <li>
       Powerful bit-manipulation operations
       <br/>
      </li>
      <li>
       Integrated bootloader providing several boot options and functionalities
       <br/>
       <ul>
        <li>
         Boot from UART / SPI EEPROM / internal memory / Wishbone device
         <br/>
        </li>
        <li>
         Program SPI EEPROM
         <br/>
        </li>
        <li>
         RAM dump of any memory page
         <br/>
        </li>
        <li>
         Dump words from Wishbone network
         <br/>
        </li>
       </ul>
      </li>
      <li>
       Interface for external coprocessors to extend the processor's functionality
       <br/>
      </li>
      <li>
       Simple memory and coprocessor interface
       <br/>
      </li>
      <li>
       
        <b>
         Assembler program
        </b>
       
       to easily create and assemble application code
       <br/>
      </li>
      <li>
       Integrated peripheral controller:
       <br/>
       <ul>
        <li>
         High precision timer (32-bit)
         <br/>
        </li>
        <li>
         Memory management unit (supports paging) - 32 bit address space
         <br/>
        </li>
        <li>
         Flexible linear-feedback shift register (taps configurable) for pseudo random data
         <br/>
        </li>
        <li>
         Internal interrupt controller for up to 8 channels
         <br/>
        </li>
        <li>
         16+8 bit parallel input and 16+8 bit parallel output ports
         <br/>
        </li>
        <li>
         General purpose SPI controller with variable transfer frame size, 8 individual channels
         <br/>
        </li>
        <li>
         Configurable universal asynchronous receiver/transmitter (UART)
         <br/>
        </li>
        <li>
         Wishbone bus master adapter (32-bit address, 16-bit data, pipelined burst transfer, packet size 1..32 16-bit words)
         <br/>
        </li>
       </ul>
      </li>
     </ul>
     <br/>
    </p>
   </div>
   <div id="d_Programmer Model">
    <h2>
     
     
     Programmer Model
    </h2>
    <p id="p_Programmer Model">
     <table border="0" cellpadding="6">
      <tr>
       <td align="center">
        <img src="//opencores.org/websvn,filedetails?repname=atlas_core&amp;path=%2Fatlas_core%2Fweb_uploads%2Fprogrammers_model.png" alt="Atlas 2k Programmer's Model" width="462"/>
        <img src="//opencores.org/websvn,filedetails?repname=atlas_core&amp;path=%2Fatlas_core%2Fweb_uploads%2FMSR.png" alt="Atlas 2k MSR" width="462"/>
       </td>
       <td>
        <b>
         ARM thubb-like instruction set.
        </b>
        All instructions are 16 bit wide. Arithmetical instructions use 3-register-addressing.
        <br/>
        The CPU provides
        <b>
         two different privilige modes
        </b>
        : A privileged one (system mode) and an unprivileged one (user mode). Each mode has access to a register bank of
        <b>
         8x 16-bit register
        </b>
        . When operating in system mode, data can also be transfered from or to the user register bank. R7 of each bank is used as link register to store the return address when calling subroutines
        <br/>
        User mode and system mode programs can access the program counter (PC) and the machine status register (MSR). The PC can be altered by both operating modes. System mode programs have full access to the MSR, but user mode programs can only alter the user ALU flags of the MSR, so an user mode program cannot alter the state of the host system. Both operations mode have also private sets of ALU status flags, so no context store at all is necessary when changing modes.
        <br/>
        When in system mode, the
        <b>
         internal coprocesor
        </b>
        and the optional external user processor can be accessed. When in user mode, only the external user processor can be accessed, but however, this access privilege can be deactivated, allowing only system mode programs to have access to the two coprocessor.
        <br/>
        <b>
         Five interrupt/execption vectors
        </b>
        are supported: 0: Hardware reset, 1: interrupt via the critical IRQ pin, 2: interrupt from the internal IRQ controller (supports another 8 IRQ channels), 3: command error trap, 4: software interrupt (system call).
        <br/>
        All instructions, that require system privileges, will cause an software interrupt when executed in user mode, allowing
        <b>
         hardware-based emulation of system-mode programs
        </b>
        in restricted user mode environment.
       </td>
      </tr>
      <tr>
       <td>
        I have tried to design the instruction set architecture as orthogonal as possible.
        <br/>
        All data processing instructions (arithmetical, logical, bit manipulation, transfer, ...) can be applied on any of the current mode's 8 data registers. All instructions of these classes feature three operand slots, making the Atlas CPU a
        <b>
         three address-machine
        </b>
        . For all arithmetical/logical instructions, the
        <b>
         update of the status flags is optional
        </b>
        .
        <br/>
        Data memory accesses can be performend unsig any register as pointer/data and as source/destination. Immediate and register-based offset addition/subtraction before or after the actual memory access is possible (
        <b>
         pointer indexing
        </b>
        ). Also, a write back of a modified base address can be enabled.
        <br/>
        An
        <b>
         application-specific coprocessor
        </b>
        (EXTernal USER coprocessor) can be connected to the CPU to extend the core's functionality and processing power. Dedicated coprocessor transfer and data processing instructions are supported.
        <br/>
        The CPU features a power-saving
        <b>
         sleep mode
        </b>
        . Any enabled interrupt signal will wake up the CPU again (single cycle response time).
        <br/>
        Single cycle
        <b>
         32-bit multiplier
        </b>
        . Instructions to get upper/lower 16-bit multiplication result.
        <br/>
        Conditional/unconditional immediate branch/call instructions can jump to a location within +255 and -256 instructions. Also, conditional relative/absolute register-based branches are implemented. The newest version also includes
        <b>
         conditional register move instructions
        </b>
        to accelerate conditional data transfer.
        <br/>
        For more details about the implemented instructions, see the
        
         <b>
          Atlas 2k Processor Documentary
         </b>
        
        .
       </td>
       <td align="center">
        <img src="//opencores.org/websvn,filedetails?repname=atlas_core&amp;path=%2Fatlas_core%2Fweb_uploads%2Finstruction_set_card.png" alt="Atlas 2k ISA" width="542"/>
       </td>
      </tr>
     </table>
     <br/>
    </p>
   </div>
   <div id="d_Synthesis Results">
    <h2>
     
     
     Synthesis Results
    </h2>
    <p id="p_Synthesis Results">
     Synthesis (
     <u>
      speed optimized
     </u>
     ) results for a Xilinx Spartan XC3S400A FPGA:
     <br/>
     <table border="1" cellpadding="2">
      <tr>
       <th>
       </th>
       <th>
        Atlas 2k Processor Base Setup*
       </th>
      </tr>
      <tr>
       <td>
        Number of Slices:
       </td>
       <td>
        1347 / 3584 =
        <b>
         37%
        </b>
       </td>
      </tr>
      <tr>
       <td>
        Number of 4 input LUTs:
       </td>
       <td>
        2406 / 7168 =
        <b>
         33%
        </b>
       </td>
      </tr>
      <tr>
       <td>
        Number of Slice Flip Flops:
       </td>
       <td>
        1091 / 7168 =
        <b>
         15%
        </b>
       </td>
      </tr>
      <tr>
       <td>
        Number of IOs:
       </td>
       <td>
        18
       </td>
      </tr>
      <tr>
       <td>
        Number of BRAMs:
       </td>
       <td>
        11 / 20 =
        <b>
         55%
        </b>
       </td>
      </tr>
      <tr>
       <td>
        Number of MULT18X18SIOs:
       </td>
       <td>
        1 / 20 =
        <b>
         5%
        </b>
       </td>
      </tr>
      <tr>
       <td>
        Maximum Frequency:
       </td>
       <td>
        <b>
         81.252 MHz
        </b>
       </td>
      </tr>
     </table>
     <br/>
     Full implementation (
     <u>
      balanced optimization, slow 1200mV 0C model
     </u>
     ) results for an Altera Cyclone IV EP4CE22F17C6N FPGA:
     <br/>
     <table border="1" cellpadding="2">
      <tr>
       <th>
       </th>
       <th>
        Atlas 2k Processor Base Setup*
       </th>
      </tr>
      <tr>
       <td>
        Total logic elements:
       </td>
       <td>
        2967 / 22320 =
        <b>
         13%
        </b>
       </td>
      </tr>
      <tr>
       <td>
        Total combinational functions:
       </td>
       <td>
        2692 / 22320 =
        <b>
         12%
        </b>
       </td>
      </tr>
      <tr>
       <td>
        Dedicated logic registers:
       </td>
       <td>
        1364 / 22320 =
        <b>
         6%
        </b>
       </td>
      </tr>
      <tr>
       <td>
        Total pins:
       </td>
       <td>
        18
       </td>
      </tr>
      <tr>
       <td>
        Total memory bits:
       </td>
       <td>
        297984 / 608256 =
        <b>
         49%
        </b>
       </td>
      </tr>
      <tr>
       <td>
        Embedded Multiplier 9-bit elements:
       </td>
       <td>
        2 / 132 =
        <b>
         2%
        </b>
       </td>
      </tr>
      <tr>
       <td>
        Maximum Frequency:
       </td>
       <td>
        <b>
         99.11 MHz
        </b>
       </td>
      </tr>
     </table>
     <br/>
     Synthesis results correspond to the project version from April 17th, 2014
     <br/>
     *) The default Base Setup includes 2kB bootloader ROM and 16kB (divided into 4 pages) internal RAM; for this synthesis
     <br/>
     I've added a 256-byte Wishbone RAM (directly connected) and reduced the number of IO pins (1x SPI (4), UART(2), SYS_IO (10), clk &amp; reset (2))
     <br/>
     <br/>
    </p>
   </div>
   <div id="d_Application Software">
    <h2>
     
     
     Application Software
    </h2>
    <p id="p_Application Software">
     Currently the Atlas 2k project includes only some example programs for the core:
     <br/>
     <ul>
      <li>
       A simple blinking LED to get into the basics of the Atlas 2k assembler
       <br/>
      </li>
      <li>
       A random numbe rgenerator to play with the internal LFSR
       <br/>
      </li>
      <li>
       A Fast Fourier Transformation to impress you with the processing power... ;)
      </li>
      <li>
       ... more to come
      </li>
     </ul>
     <br/>
     <b>
      You have written some cool program for the Atlas 2k?
      <br/>
      Get in touch so we can add your code to the examples collection to share it with the community!
     </b>
     <br/>
     <br/>
    </p>
   </div>
   <div id="d_Status">
    <h2>
     
     
     Status
    </h2>
    <p id="p_Status">
     <ul>
      <li>
       The main processor rtl modules are completed and tested - maybe additional coprocessor modules will be added
      </li>
      <li>
       Some of the rarely used special options of some commands need a little bit more verification... ;)
      </li>
      <li>
       The bootloader works fine can successfully boot an image from any source
      </li>
      <li>
       All example programs run without problems
      </li>
      <li>
       Processor specification completed, but might be updated with additional information in future
      </li>
      <li>
       Assembler program is working and will be further improved
      </li>
      <li>
       The 'Atlas 2k Base Setup' features a ready-to-start implementation of the processor - FPGA proven
      </li>
     </ul>
     <br/>
    </p>
   </div>
   <div id="d_Contact">
    <h2>
     
     
     Contact
    </h2>
    <p id="p_Contact">
     If you have any questions about the Atlas project or if you want to give any kind of feedback, feel free to drop me some lines ;)
     <br/>
     <ul>
      <li>
       Stephan Nolting:
       <b>
        stnolting@gmail.com
       </b>
      </li>
     </ul>
     <br/>
    </p>
   </div>
  </div>
  <div style="clear:both;margin-left:200px;">
  </div>
 </div>
</div>
</body>
<p id='foot'>Database updated on 12 June 2015</p>
