<head>
<link rel="stylesheet" href="../../style.css" type="text/css">
</head>
<a href="javascript:history.go(-1)" onMouseOver="self.status=document.referrer;return true">Go Back</a>
<p align='right'><a href='ha1588.tar.gz'>Source code</a></p>
<body>
<div class="main">
 <div class="mid" id="dm">
  <div class="content" id="dmc">
   <h2>
    Details
   </h2>
   <p>
    Name: ha1588
    <br/>
    Created: Mar  6, 2012
    <br/>
    Updated: Feb  9, 2015
    <br/>
    SVN Updated: Jun  3, 2014
    
    
    
    
    
    
   </p>
   <h2>
    Other project properties
   </h2>
   <p>
    Category:
    
     Communication controller
    
    <br/>
    Language:
    
     Verilog
    
    <br/>
    Development status:
    
     Beta
    
    <br/>
    Additional info:
    
     Design done
    
    ,
    
     Specification done
    
    <br/>
    WishBone Compliant: Yes
    <br/>
    License: LGPL
   </p>
   <div id="d_Architecture">
    <h2>
     
     
     Architecture
    </h2>
    <p id="p_Architecture">
     <img src="usercontent,img,1373613550" alt="Architecture-small"/>
    </p>
   </div>
   <div id="d_Description">
    <h2>
     
     
     Description
    </h2>
    <p id="p_Description">
     Hardware Assisted IEEE 1588 IP Core. The necessary FPGA logic to assist SW protocol stack in implementing the Precision Time Protocol (IEEE 1588-2008) on 1000M/100M/10M Ethernet networks. PTP packets transmitting and receiving should be implemented by PTP SW protocol stack (PTPd) with existing MAC function; This IP Core implements the Real-Time Clock (RTC) and Time Stamping (TSU) of PTP event packets.
     <br/>
     Feature Description
     <br/>
     RTC: Real Time Clock.
     <br/>
     * Standard PTP clock output with 2^48s and 2^32ns time format.
     <br/>
     * 1PPS output for clock accuracy measurement.
     <br/>
     * Tunable accumulator based clock with 2^-8ns time resolution and 2^-32ns period resolution.
     <br/>
     ** Direct time write, with 2^-8ns resolution.
     <br/>
     ** Direct frequency write, with 2^-32ns resolution.
     <br/>
     ** Timed temporary time adjustment, with 2^-8ns resolution and 32bit timer.
     <br/>
     * Variable input clock frequency.
     <br/>
     * Clock Domain Crossing hand-shaking, for SW read and write access.
     <br/>
     TSU: Time Stamping Unit.
     <br/>
     * Two-Step PTP operation.
     <br/>
     * GMII/MII interface monitor with line-speed PTP packet parsing.
     <br/>
     * Variety of PTP packet formats supported.
     <br/>
     ** Layer2 IEEE 802.3 PTP packet, with stacked VLAN tags.
     <br/>
     ** Layer4 IPv4/UDP and IPv6/UDP PTP packet, with stacked VLAN tags and/or stacked MPLS labels.
     <br/>
     * Configurable 8bit one-hot mask to selectively timestamp PTP event packet based on message type value.
     <br/>
     ** mask bit 0: Sync
     <br/>
     ** mask bit 1: Delay_Req
     <br/>
     ** mask bit 2: Pdelay_Req
     <br/>
     ** mask bit 3: Pdelay_Resp
     <br/>
     ** mask bit 4 to 7: Reserved for future PTP event message types
     <br/>
     * 32bit packet parser datapath for easier timing closure.
     <br/>
     * 15-entry timestamp queue.
     <br/>
     * 128bit timestamp format.
     <br/>
     ** 16bit extra information.
     <br/>
     ** 80bit timestamp.
     <br/>
     ** 32bit packet identity data.
     <br/>
     SystemVerilog DPI based simulation environment is included for SW driver development and co-simulation.
     <br/>
     (sim/top/ptp_drv_bfm/ptp_drv_bfm.c) (sim/top/ptp_drv_bfm/ptp_drv_bfm.v)
     <br/>
     PCAP file based stimulus input is included for verification with real-world traffic.
     <br/>
     (sim/top/nic_drv_bfm/ptpdv2_tx.pcap) (sim/top/nic_drv_bfm/ptpdv2_rx.pcap)
     <br/>
     The IP Core can be used as an IP Component in Altera Qsys, Xilinx XPS or WishBone.
     <br/>
     (rtl/bus/qsys) (rtl/bus/xps/pcores) (rtl/bus/wishbone)
     <br/>
     The only FPGA vendor dependent module is the timestamp queue. Both Altera and Xilinx's DCFIFOs are provided in the PAR folder.
     <br/>
     (par/altera/ip/dcfifo_128b_16.v) (par/xilinx/ip/dcfifo_128b_16.v)
     <br/>
    </p>
   </div>
   <div id="d_Bonus Tool">
    <h2>
     
     
     Bonus Tool
    </h2>
    <p id="p_Bonus Tool">
     A tool to analyze the transaction timing of captured PTPv2 packets. The tool is written and run in Scilab. The captured PTPv2 packets are results of running PTPdv2 between two PCs.
     <br/>
     (doc/tool/ptpv2_timing_analyzer/ptpv2_timing_analyzer.sce)
    </p>
   </div>
   <div id="d_TODO">
    <h2>
     
     
     TODO
    </h2>
    <p id="p_TODO">
     It is complained that there is a lack of documentation for the HA1588 project. This will be fulfilled for the next release. Here are two requests for those who requested:
     <br/>
     1. Read the RTC and TSU memory map under the /doc folder, with the detailed operation procedure in the /sim/top/ptp_drv_bfm/ptp_drv_bfm.c
     <br/>
     2. Give feedback of what should be included in the documentation as bug-fix requests
    </p>
   </div>
  </div>
  <div style="clear:both;margin-left:200px;">
  </div>
 </div>
</div>
</body>
<p id='foot'>Database updated on 12 June 2015</p>
