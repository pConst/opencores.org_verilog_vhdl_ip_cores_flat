<head>
<link rel="stylesheet" href="../../style.css" type="text/css">
</head>
<a href="javascript:history.go(-1)" onMouseOver="self.status=document.referrer;return true">Go Back</a>
<p align='right'><a href='zx_ula.tar.gz'>Source code</a></p>
<body>
<div class="main">
 <div class="mid" id="dm">
  <div class="content" id="dmc">
   <h2>
    Details
   </h2>
   <p>
    Name: zx_ula
    <br/>
    Created: Apr 23, 2012
    <br/>
    Updated: Jan  6, 2013
    <br/>
    SVN Updated: Jan  6, 2013
    
    
    
    
    
    
   </p>
   <h2>
    Other project properties
   </h2>
   <p>
    Category:
    
     Video controller
    
    <br/>
    Language:
    
     Verilog
    
    <br/>
    Development status:
    
     Beta
    
    <br/>
    Additional info:
    
     Design done
    
    ,
    
     FPGA proven
    
    ,
    
     Specification done
    
    <br/>
    WishBone Compliant: No
    <br/>
    License: GPL
   </p>
   <div id="d_Description">
    <h2>
     
     
     Description
    </h2>
    <p id="p_Description">
     This is an implementation of the Sinclair ULA chip, found in ZX Spectrum microcomputers. The project offers various implementations: both FPGA friendly (with separate input and output data buses), and CPLD ready, to be used as a replacement for the many chips that comprise the ULA found in some clones.
     <br/>
     This project is mostly based upon the work of Chris Smith. Chris designed a ZX Spectrum clon, the "Harlequin". A PCB has been developed by Don "Superfo", which uses discrete logic to implement the ULA, as Chris did. The CPLD version of this implementation is aimed to serve as replacement for that clone.
     <br/>
     The ULA implementation follows, where possible, the original ULA timmings, as stated in "The ZX Spectrum ULA: how to design a microcomputer", written by Chris Smith and published by ZX Design and Media, ISBN 978-0-9565071-0-5
     <br/>
     There are implementations with some enhancements such as Timex hicolour support and ULA+ support.
    </p>
   </div>
   <div id="d_Features">
    <h2>
     
     
     Features
    </h2>
    <p id="p_Features">
     <ul>
      <li>
       CPLD (XC95144/288XL) version, with shared data bus, designed for the Harlequin clone.
      </li>
      <li>
       FPGA (separate input and data buses, mostly synchronous, but I cannot aassure that) version, intented for soft SoC.
      </li>
      <li>
       <ul>
        <li>
         <em>
          To test the FPGA version, several clones have been built around this ULA core. See directory branches/xilinx. These clones are ready to be used in the Spartan 3 Starter Board, both 200K and 1000K gate versions.
         </em>
        </li>
       </ul>
      </li>
      <li>
       All timmings according to Chris Smith's specs. Yet to be tested against a real Z80 for timming accuracy (tv80 core seems not to have exact timmings, but this could be my fault, not tv80's)
      </li>
      <li>
       Digital IRGB output, PAL timmings. Same signals as found in the 128K heatsink RGB DIN connector, that is, bright component separated from main components.
      </li>
      <li>
       8 bit digital RGB output for ULA+ mode. Output signal indicate whether ULA is in normal or plus mode.
      </li>
      <li>
       EAR, MIC and SPK pins
      </li>
      <li>
       FPGA version adds the 8-pin row connector for keyboard matrix. See xilinx/ directory for design examples.
      </li>
      <li>
       Timex Hicolor mode supported in the FPGA version of the core.
      </li>
      <li>
       ULA+ implemented in the FPGA version of the core.
      </li>
     </ul>
    </p>
   </div>
   <div id="d_Videos">
    <h2>
     
     
     Videos
    </h2>
    <p id="p_Videos">
    </p>
    <p>
     
      Various ULA timming tests.
     
    </p>
    <p>
     
      Testing a ZX Spectrum clone running at 7MHz CPU clock speed. Part I.
     
    </p>
    <p>
     
      Testing a ZX Spectrum clone running at 7MHz CPU clock speed. Part II.
     
    </p>
    <p>
     
      Testing the Timex hicolor mode on a ZX Spectrum ULA enhanced clone.
     
    </p>
    <p>
     
      Testing the Timex hicolor and ULA+ mode with a slideshow.
     
    </p>
   </div>
   <div id="d_Images">
    <h2>
     
     
     Images
    </h2>
    <p id="p_Images">
    </p>
    <p>
     <img src="usercontent,img,1335664476" alt="Spartan 3 Starter Board connections"/>
     <br/>
     Spartan 3 Starter Board connections for running this clone. RGB signal has separate bright (I) component, so you will need to mix the bright signal before entering the TV/monitor. Usually this is performed by a RGB cable compatible with the 128K heatsink Spectrum, so you will need a female DIN-8 socket and wire it accordingly with your cable (UK or Investronica).
     <br/>
     Keyboard connections are not needed with PS2 enabled clones.
    </p>
    <p>
     <img src="usercontent,img,1335559155" alt="ZX Spectrum design in a Digilent Spartan 3 Starter Board. Real matrix keyboard version"/>
     <br/>
     ZX Spectrum design in a Digilent Spartan 3 Starter Board. Real matrix keyboard version.
    </p>
    <p>
     <img src="usercontent,img,1335562623" alt="ZX Spectrum clone, just after loading Horizons"/>
     <br/>
     ZX Spectrum clone built around an earler version of the ULA design. This shows the working screen of the first program from the Horizons demo tape (spanish version), the one that teaches the hardware of the Spectrum. Can you name the differences between the elements depicted on screen and the actual hardware that's running them? :D
    </p>
    <p>
     <img src="usercontent,img,1335664495" alt="OverScan demo running"/>
     <br/>
     The Overscan demo running in the clone. This is the PS2 enabled keyboard clone version. The PS2 keyboard uses the spanish mapping. English mapping will be ready very soon.
    </p>
    <p>
     <img src="usercontent,img,1336925827" alt="Aquaplane"/>
     <br/>
     Aquaplane, showing a perfect full screen horizon)
    </p>
    <p>
     <img src="usercontent,img,1336925843" alt="Shock Megademo"/>
     <br/>
     Shock Megademo, part 2. This part is very sensitive to interrupt, ULA and Z80 timmings, so it's a perfect test.
    </p>
    <p>
     <img src="usercontent,img,1336925870" alt="Dark Star"/>
     <br/>
     Dark Star. This game features a graphic drawn in the border area. For this to be showed correctly, both interrupt timmings and ULA timmings have to be perfect.
    </p>
    <p>
     <img src="usercontent,img,1335723699" alt="Hicolor Timex demo screen"/>
     <br/>
     Hicolor Timex demo screen. The "Videos" section features this demo. A new enhanced ULA description which supports this mode has been uploaded to the fpga_version directory. NOTE: only the hicolor mode is supported. The hires mode or the dual screen mode of the Timex TC2048/2068 is not supported.
    </p>
    <p>
     <img src="usercontent,img,1336792138" alt="The Gioconda displayed in a ZX Spectrum with ULA+ and Timex Hicolor support"/>
     <br/>
     The Gioconda, displayed in the ULA+ &amp; Time HiColor enabled clone. This picture belongs to the new slideshow "Famous pictures" that you can find at the "software/ulaplus_demos" directory in the SVN repository.
    </p>
    <p>
     If you want to build one of these clones, but you doesn't have a fancy FPGA trainer board, Joseba Epalza Ramos, from INGEPAL, has sucessfully adapted a Spectrum clone to work entirely within the FPGA in the OLS (no external SRAM required). Of course, this means that this clone cannot have a 16K ROM and at least 16K of RAM, which is the minimum specification for a Spectrum, but there were ROM versions of various games available at the time. Some of these versions were made to fit an 8K ROM chip (cheaper than a 16K ROM). Thus, Joseba's clone features a ROM game (
     
      Space Raiders, from Psion Software Ltd
     
     ) embedded in 8K of block RAM, leaving the rest (16K) to build the first 16K of RAM, including of course, the video RAM.
    </p>
    <p>
     <img src="usercontent,img,1356007196" alt="Spectrum in an OLS board, showin"/>
     <br/>
     The clone, showing B/W video: just mix the three RGB signals with weight resistors to get a grayscale signal, which in turn is mixed to the sync signal to get a monocrome video signal you can use to feed the AV INPUT of any TV or video capture device.
    </p>
    <p>
     <img src="usercontent,img,1356007213" alt="Spectrum in an OLS board, showin"/>
     <br/>
     The same clone, now using a proper RGB output.
    </p>
    <p>
     <img src="usercontent,img,1356007288" alt="Wiring IRGB signals from the OLS"/>
     <br/>
     Closeup of the wiring needed to adapt the digital IRGB signals to analog RGB signals. This scheme is the same as shown at
     
      the Paul Farrow site
     
    </p>
    <p>
     <img src="usercontent,img,1356005798" alt="Connections at the OLS board"/>
     <br/>
     Connection diagram for this clone
    </p>
    <p>
     <img src="usercontent,img,1357495110" alt="Gameduino-based ZX clone: top view"/>
     <br/>
     A ZX Spectrum clone built on top of the Gameduino shield by Don "Superfo". Don has added a piggy-back board that connects to the Gameduino.
    </p>
    <p>
     <img src="usercontent,img,1357495135" alt="Gameduino-based ZX clone: bottom view"/>
     <br/>
     Bottom view of above design. The Gameduino has footprints to solder either a 512KB SRAM memory, or a 32MB SDRAM. This design uses the SRAM approach.
    </p>
    <p>
     <img src="usercontent,img,1357495163" alt="Gameduino ZX loading from iPhone"/>
     <br/>
     The piggy-back board includes an EAR signal conditioner, so loading from iPhone or MP3 players is not an issue :)
    </p>
    <p>
     <img src="usercontent,img,1357495192" alt="Gameduino ZX showing multicolor "/>
     <br/>
     The core is almost the same as used for the ULAplus+Timex Hicolor supported core. Both are available at the project's repository.
    </p>
    <p>
     A
     
      schematic for the piggy-back board
     
     is also available.
    </p>
   </div>
  </div>
  <div style="clear:both;margin-left:200px;">
  </div>
 </div>
</div>
</body>
<p id='foot'>Database updated on 12 June 2015</p>
